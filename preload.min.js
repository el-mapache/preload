(function(c){c.fn.preloader=function(d){return this.each(function(){var g=c(this),f=g.data("preloader"),e=typeof d=="object"&&d;if(!f){g.data("preloader",(f=new a(this,e)))}})};c.fn.preloader.Contructor=a;var b=c.fn.preloader.defaults={fadeDelayTime:350,checkLoadedStatus:300,fadeIn:600,onDone:function(){},onEachLoad:function(f,e,d){c(f).css({visibility:"visible"}).delay(e).animate({opacity:1},d,"linear",function(){c(this).parents().removeClass("preloader")});c(f).trigger("image:loaded",{image:f})}};function a(e,d){this.el=e;this.$el=c(e);this.images=[];this.isLoaded=[];this.settings=c.extend({},b,d);this._setUp()}a.prototype={Constructor:a,_updateTags:function(e){var d=c(e).parents().first()[0],f=c(e).next()[0];d.removeChild(e);return function(){if(f){d.insertBefore(e,f)}else{d.appendChild(e)}}},_setImageStyle:function(d){d.style.visibility="hidden";d.style.opacity="0"},_getImages:function(){var e=0,d,g;if(this.el.tagName.toLowerCase()==="img"){this._setImageStyle(this.el);return this.images=[this.el]}d=this.el.getElementsByTagName("img");g=d.length;if(d.length<1){return false}if(d.length>1){var f=this._updateTags(this.el);for(e;e<g;e++){this._setImageStyle(d[e]);this.images[e]=d[e]}f()}else{this._setImageStyle(d[0])}return this.images},_wrapImages:function(){var e=0,d=this.images,f=d.length;for(e;e<f;e++){c(d[e]).wrap("<a class='preloader'></a>");this.isLoaded[e]=false}},_createLoadingIcon:function(){var d=document.createElement("img");d.src="89.gif";d.style.display="none";document.body.appendChild(d);return d},_preloadLoadingIcon:function(){var g,d=this,f=this._createLoadingIcon();function e(){if(f.complete===true){clearInterval(g);document.body.removeChild(f);d._initialize();return}}g=setInterval(function(){e.call(d)},50)},_setUp:function(){this._getImages();this._wrapImages();this._preloadLoadingIcon()},_initialize:function(){var e=this.images,g=this.settings.fadeDelayTime,i,d=this.isLoaded,f=this;function h(){var j=0,k=e.length;if(k===0){clearInterval(i);f.settings.onDone.call(f);return f.el}for(j;j<k;j++){if(e[j]!==undefined&&e[j].complete===true){if(d[j]===false){d[j]=true;d.splice(j,1);f.settings.fadeDelayTime+=g}f.settings.onEachLoad(e[j],f.settings.fadeDelayTime,f.settings.fadeIn);e.splice(j,1)}}}i=setInterval(function(){h.call(f)},this.settings.checkLoadedStatus)}}}(window.jQuery));